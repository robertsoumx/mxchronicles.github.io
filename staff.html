<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MX Chronicles Â· Staff Portal</title>
  <link rel="stylesheet" href="style.css">
  <script src="articles.js" defer></script>
  <script src="script.js" defer></script>
</head>
<body>

<header class="site-header">
  <div class="masthead">MX Chronicles</div>
  <nav class="nav-tabs">
    <a href="index.html">Home</a>
    <a href="articles.html">Articles</a>
    <a href="about.html">About</a>
    <a href="staff.html">Staff Portal</a>
  </nav>
</header>

<main class="container">
  <h1>Staff Portal</h1>

  <!-- Password input -->
  <div id="login-section">
    <p>Enter the administrator password:</p>
    <input type="password" id="staff-password" placeholder="Password">
    <button onclick="checkPassword()">Enter</button>
    <p id="login-error" style="color:red;"></p>
  </div>

  <!-- Admin panel -->
  <div id="admin-panel" style="display:none;">
    <h2>Welcome, Admin!</h2>

    <!-- Add Article -->
    <section>
      <h3>Add New Article</h3>
      <input type="text" id="new-article-id" placeholder="Unique Article ID"><br>
      <input type="text" id="new-article-title" placeholder="Title"><br>
      <input type="text" id="new-article-author" placeholder="Author"><br>
      <input type="text" id="new-article-date" placeholder="Date"><br>
      <input type="text" id="new-article-issue" placeholder="Issue"><br>
      <input type="text" id="new-article-image" placeholder="Image URL"><br>
      <input type="text" id="new-article-caption" placeholder="Caption"><br>
      <textarea id="new-article-content" placeholder="Article content HTML"></textarea><br>
      <button onclick="addArticle()">Add Article</button>
    </section>

    <!-- Add Staff -->
    <section>
      <h3>Add Staff Member</h3>
      <input type="text" id="new-staff-name" placeholder="Staff Name"><br>
      <input type="text" id="new-staff-role" placeholder="Role"><br>
      <button onclick="addStaff()">Add Staff</button>
    </section>

    <!-- Homepage Layout -->
    <section>
      <h3>Homepage Layout Editor</h3>
      <p>Drag and drop or rearrange articles on homepage (simplified for demo):</p>
      <select id="homepage-featured">
        <option value="">Select Featured Article</option>
      </select>
      <button onclick="setFeaturedArticle()">Set Featured</button>
    </section>
  </div>

</main>

<script>
  const ADMIN_PASSWORD = "26MXChronicles"; // Change this

  function checkPassword() {
    const pwd = document.getElementById("staff-password").value;
    if(pwd === ADMIN_PASSWORD){
      document.getElementById("login-section").style.display = "none";
      document.getElementById("admin-panel").style.display = "block";

      // Populate homepage featured selector
      const sel = document.getElementById("homepage-featured");
      sel.innerHTML = '<option value="">Select Featured Article</option>';
      for(let id in articles){
        const opt = document.createElement("option");
        opt.value = id;
        opt.innerText = articles[id].title;
        sel.appendChild(opt);
      }
    } else {
      document.getElementById("login-error").innerText = "Incorrect password!";
    }
  }

  function addArticle() {
    const id = document.getElementById("new-article-id").value.trim();
    if(!id) { alert("ID required"); return; }

    articles[id] = {
      title: document.getElementById("new-article-title").value,
      author: document.getElementById("new-article-author").value,
      date: document.getElementById("new-article-date").value,
      issue: document.getElementById("new-article-issue").value,
      image: document.getElementById("new-article-image").value,
      caption: document.getElementById("new-article-caption").value,
      content: document.getElementById("new-article-content").value
    };
    alert(`Article "${articles[id].title}" added!`);
  }

  function addStaff() {
    const name = document.getElementById("new-staff-name").value.trim();
    const role = document.getElementById("new-staff-role").value.trim();
    if(!name || !role){ alert("Fill both fields"); return; }

    if(!window.staffList) window.staffList = [];
    window.staffList.push({name, role});
    alert(`Staff member "${name}" added!`);
  }

  function setFeaturedArticle() {
    const id = document.getElementById("homepage-featured").value;
    if(!id) { alert("Select an article"); return; }
    alert(`Homepage featured article set to: "${articles[id].title}"`);
    // You can store this in localStorage if you want persistence
    localStorage.setItem("featuredArticle", id);
  }
</script>
</body>
</html>
