<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MX Chronicles · Staff Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<script src="data.js" defer></script>
</head>

<body>
<header class="top-bar">
  <div class="masthead">MX CHRONICLES</div>
  <nav class="top-nav">
    <a href="index.html">HOME</a>
    <a href="articles.html">ARTICLES</a>
    <a href="about.html">ABOUT</a>
    <a href="staff.html" class="active">STAFF PORTAL</a>
  </nav>
</header>

<main class="staff-layout">

<section class="staff-panel" id="login">
  <h2>STAFF ACCESS</h2>
  <input type="password" id="pass" placeholder="Password">
  <button onclick="login()">Enter</button>
  <p id="err"></p>
</section>

<section id="dashboard" hidden>

  <section class="staff-section">
    <h2>ISSUES</h2>
    <div id="issue-list"></div>
  </section>

  <section class="staff-section">
    <h2>STAFF</h2>
    <div id="staff-list"></div>
  </section>

</section>
</main>

<script>
const PASSWORD="26MXChronicles";

function login(){
  if(pass.value===PASSWORD){
    login.hidden=true;
    dashboard.hidden=false;
    renderAll();
  } else err.textContent="Incorrect password";
}

function renderAll(){
  renderIssues();
  renderStaff();
}

function renderIssues(){
  issue-list.innerHTML="";
  Object.entries(issues).forEach(([n,i])=>{
    issue-list.innerHTML+=`
      <div class="staff-row">
        <strong>Issue ${n}</strong> — ${i.theme}
      </div>`;
  });
}

function renderStaff(){
  staff-list.innerHTML="";
  staff.forEach((s,i)=>{
    staff-list.innerHTML+=`
      <div class="staff-row">
        ${s.name}
        <select onchange="staff[${i}].role=this.value">
          ${["Editor","Writer","Historian","Contributor"]
            .map(r=>`<option ${r===s.role?"selected":""}>${r}</option>`).join("")}
        </select>
      </div>`;
  });
}
</script>
</body>
</html>
